/Users/raph/lib/python3.9/site-packages/urllib3/__init__.py:35: NotOpenSSLWarning: urllib3 v2 only supports OpenSSL 1.1.1+, currently the 'ssl' module is compiled with 'LibreSSL 2.8.3'. See: https://github.com/urllib3/urllib3/issues/3020
  warnings.warn(
INFO:main:Using Ollama for embeddings: http://localhost:11434 with model 'mxbai-embed-large:latest'
INFO:main:✓ Ollama model 'mxbai-embed-large:latest' is available
INFO:__main__:Running Bundle-Parent with RecursiveJSON children on 10000 files (out of 132842 total)
INFO:__main__:Found 10000 files to process
INFO:__main__:================================================================================
INFO:__main__:
================================================================================
INFO:__main__:Testing: Bundle-as-Parent with RecursiveJSON Children
INFO:__main__:  Parent: Entire FHIR bundle (all resources combined)
INFO:__main__:  Children: Recursive JSON chunks (max=1000, min=100)
INFO:__main__:================================================================================
INFO:__main__:Clearing caches between tests...
INFO:__main__:  Round 1: Collected 0 objects
INFO:__main__:  Total garbage collected: 0 objects
INFO:__main__:  ✓ Cache clearing complete - ready for next test
INFO:__main__:  Processed 1000/10000 files...
INFO:__main__:  Processed 2000/10000 files...
INFO:__main__:  Processed 3000/10000 files...
INFO:__main__:  Processed 4000/10000 files...
INFO:__main__:  Processed 5000/10000 files...
INFO:__main__:  Processed 6000/10000 files...
INFO:__main__:  Processed 7000/10000 files...
INFO:__main__:  Processed 8000/10000 files...
INFO:__main__:  Processed 9000/10000 files...
INFO:__main__:  Processed 10000/10000 files...
INFO:__main__:
Results for max1000_min100:
INFO:__main__:  Total files: 10,000
INFO:__main__:  Total resources: 742,699
INFO:__main__:  Total chunks: 752,699
INFO:__main__:    - Parent chunks: 10,000 (avg 1.0 per file)
INFO:__main__:    - Child chunks: 742,699 (avg 74.3 per file)
INFO:__main__:  Avg parent size: 5078.2 chars (493.1 tokens)
INFO:__main__:  Avg child size: 822.8 chars (47.0 tokens)
INFO:__main__:  Min chunk size: 83 chars
INFO:__main__:  Max chunk size: 28104 chars
INFO:__main__:  Processing time: 16.07 seconds
INFO:__main__:
================================================================================
INFO:__main__:Testing: Bundle-as-Parent with RecursiveJSON Children
INFO:__main__:  Parent: Entire FHIR bundle (all resources combined)
INFO:__main__:  Children: Recursive JSON chunks (max=1000, min=500)
INFO:__main__:================================================================================
INFO:__main__:Clearing caches between tests...
INFO:__main__:  Round 1: Collected 0 objects
INFO:__main__:  Total garbage collected: 0 objects
INFO:__main__:  ✓ Cache clearing complete - ready for next test
INFO:__main__:  Processed 1000/10000 files...
INFO:__main__:  Processed 2000/10000 files...
INFO:__main__:  Processed 3000/10000 files...
INFO:__main__:  Processed 4000/10000 files...
INFO:__main__:  Processed 5000/10000 files...
INFO:__main__:  Processed 6000/10000 files...
INFO:__main__:  Processed 7000/10000 files...
INFO:__main__:  Processed 8000/10000 files...
INFO:__main__:  Processed 9000/10000 files...
INFO:__main__:  Processed 10000/10000 files...
INFO:__main__:
Results for max1000_min500:
INFO:__main__:  Total files: 10,000
INFO:__main__:  Total resources: 742,699
INFO:__main__:  Total chunks: 752,699
INFO:__main__:    - Parent chunks: 10,000 (avg 1.0 per file)
INFO:__main__:    - Child chunks: 742,699 (avg 74.3 per file)
INFO:__main__:  Avg parent size: 5078.2 chars (493.1 tokens)
INFO:__main__:  Avg child size: 822.8 chars (47.0 tokens)
INFO:__main__:  Min chunk size: 83 chars
INFO:__main__:  Max chunk size: 28104 chars
INFO:__main__:  Processing time: 13.48 seconds
INFO:__main__:
================================================================================
INFO:__main__:Testing: Bundle-as-Parent with RecursiveJSON Children
INFO:__main__:  Parent: Entire FHIR bundle (all resources combined)
INFO:__main__:  Children: Recursive JSON chunks (max=1000, min=800)
INFO:__main__:================================================================================
INFO:__main__:Clearing caches between tests...
INFO:__main__:  Round 1: Collected 0 objects
INFO:__main__:  Total garbage collected: 0 objects
INFO:__main__:  ✓ Cache clearing complete - ready for next test
INFO:__main__:  Processed 1000/10000 files...
INFO:__main__:  Processed 2000/10000 files...
INFO:__main__:  Processed 3000/10000 files...
INFO:__main__:  Processed 4000/10000 files...
INFO:__main__:  Processed 5000/10000 files...
INFO:__main__:  Processed 6000/10000 files...
INFO:__main__:  Processed 7000/10000 files...
INFO:__main__:  Processed 8000/10000 files...
INFO:__main__:  Processed 9000/10000 files...
INFO:__main__:  Processed 10000/10000 files...
INFO:__main__:
Results for max1000_min800:
INFO:__main__:  Total files: 10,000
INFO:__main__:  Total resources: 742,699
INFO:__main__:  Total chunks: 752,699
INFO:__main__:    - Parent chunks: 10,000 (avg 1.0 per file)
INFO:__main__:    - Child chunks: 742,699 (avg 74.3 per file)
INFO:__main__:  Avg parent size: 5078.2 chars (493.1 tokens)
INFO:__main__:  Avg child size: 822.8 chars (47.0 tokens)
INFO:__main__:  Min chunk size: 83 chars
INFO:__main__:  Max chunk size: 28104 chars
INFO:__main__:  Processing time: 13.41 seconds
INFO:__main__:
================================================================================
INFO:__main__:COMPARISON SUMMARY
INFO:__main__:================================================================================
INFO:__main__:Files processed: 10000
INFO:__main__:
MAX1000_MIN100 (max=1000, min=100):
INFO:__main__:  Total chunks: 752,699
INFO:__main__:    - Parent chunks: 10,000
INFO:__main__:    - Child chunks: 742,699
INFO:__main__:  Avg child size: 822.8 chars (47.0 tokens)
INFO:__main__:  Avg children per file: 74.3
INFO:__main__:  Processing time: 16.07 seconds
INFO:__main__:
MAX1000_MIN500 (max=1000, min=500):
INFO:__main__:  Total chunks: 752,699
INFO:__main__:    - Parent chunks: 10,000
INFO:__main__:    - Child chunks: 742,699
INFO:__main__:  Avg child size: 822.8 chars (47.0 tokens)
INFO:__main__:  Avg children per file: 74.3
INFO:__main__:  Processing time: 13.48 seconds
INFO:__main__:
MAX1000_MIN800 (max=1000, min=800):
INFO:__main__:  Total chunks: 752,699
INFO:__main__:    - Parent chunks: 10,000
INFO:__main__:    - Child chunks: 742,699
INFO:__main__:  Avg child size: 822.8 chars (47.0 tokens)
INFO:__main__:  Avg children per file: 74.3
INFO:__main__:  Processing time: 13.41 seconds
INFO:__main__:
Results written to: /Users/raph/Documents/hc_ai/POC/bundle_parent_json_children_results.json
INFO:__main__:================================================================================
